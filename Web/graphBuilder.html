<html>
<head>
	<title>Graph Builder</title>
	<script src="lib/angular.min.js"></script>
	<link href="lib/bootstrap-combined.min.css" rel="stylesheet" />
	<style>
	#graph {
		position: relative;
		overflow: hidden;

		width: 800px;
		height: 600px;

		-webkit-touch-callout: none;
		-webkit-user-select: none;
		-khtml-user-select: none;
		-moz-user-select: none;
		-ms-user-select: none;
		user-select: none;
	}
	.nodes .canvas {
		position: absolute;
		top: 0;
		left: 0;
		bottom: 0;
		right: 0;
		width: 100%;
	}
	.node {
		font-size: 12px;
		border-radius: 5px;
		position: absolute;
		background: rgba(111, 111, 111, 1);
		color: white;
		width: 150px;
		overflow: hidden;
	}
	.node .header {
		font-size: 14px;
		clear: both;
		padding: 2px;
		text-align: center;
		background: rgb(37, 37, 37);
	}
	.node .options {
		overflow: hidden;
		padding: 10px 0;
	}
	.node .options .inputs, .node .options .outputs {
		width: 25%;
		float: left;
		text-align: left;
	}

	.node .options .inputs .input, .node .options .outputs .output {
		width: 100%;
		float: left;
		clear: both;
	}

	.node .options .outputs {
		text-align: right;
	}

	.node .options .inputs .con:hover, .node .options .outputs .con:hover {
		color: yellow;
	}

	.node .options .settings {
		width: 50%;
		float: left;
	}

	.handle {
		width: 15px;
		height: 15px;
		background: black;
		float: left;
	}

	.handle.add {
		background: white;
	}

	.handle.remove {
		background: red;
	}

	.handleMsg {
		float: left;
	}
	</style>
</head>
<body ng-app>


<div id="graph" ng-controller="Graph" ng-mouseup="mouseup($event)" ng-mousemove="mousemove($event)">
	<svg class="canvas">
		<path stroke="black" stroke-width="5" fill="transparent" ng-repeat="line in lines" ng-model="line" d="{{line.d}}"></path>
		<path stroke="black" stroke-width="2" ng-model="ghostLine" ng-show="ghostLine" d="{{ghostLine}}"></path>
	</svg>
	<div class="nodes">
		<div class="node" ng-repeat="node in nodes" style="left: {{node.x}}; top: {{node.y}}px;">
			<div class="header" ng-mousedown="selectNode(node, $event)">{{node.name}}</div>
			<div class="options">
				<div class="inputs">
					<div class="input" ng-repeat="(i, input) in node.inputs">
						<div ng-model="input" class="handle {{input.style}}" ng-mouseover="selectInput($event, node, i)" ng-mouseout="clearInput()" ng-mousedown="removeInputLine(node, i)"></div>
						<div class="handleMsg">{{input.name}}</div>
					</div>
				</div>

				<div class="settings">
					<div class="setting" ng-repeat="setting in node.settings">
						{{setting.name}}
					</div>
				</div>

				<div class="outputs">
					<div class="output" ng-repeat="(i, output) in node.outputs" >
						<div class="handleMsg">{{output.name}}</div>
						<div class="handle" style="float: right;" ng-mousedown="selectOutput($event, node, i)"></div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<script src="main.js"></script>

</body>
</html>